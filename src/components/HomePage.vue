<template>
<svg class="absolute top-0 z-0 right-0 hidden w-screen max-w-3xl -mt-64 ml-60 xl:block"
         viewBox="0 0 818 815" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
      <!-- Contenu de votre SVG -->
                    <defs>
                        <linearGradient x1="0%" y1="0%" x2="100%" y2="100%" id="c">
                            <stop stop-color="#E614F2" offset="0%" />
                            <stop stop-color="#FC3832" offset="100%" />
                        </linearGradient>
                        <linearGradient x1="0%" y1="0%" x2="100%" y2="100%" id="f">
                            <stop stop-color="#657DE9" offset="0%" />
                            <stop stop-color="#1C0FD7" offset="100%" />
                        </linearGradient>
                        <filter x="-4.7%" y="-3.3%" width="109.3%" height="109.3%" filterUnits="objectBoundingBox"
                            id="a">
                            <feOffset dy="8" in="SourceAlpha" result="shadowOffsetOuter1" />
                            <feGaussianBlur stdDeviation="8" in="shadowOffsetOuter1" result="shadowBlurOuter1" />
                            <feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.15 0" in="shadowBlurOuter1" />
                        </filter>
                        <filter x="-4.7%" y="-3.3%" width="109.3%" height="109.3%" filterUnits="objectBoundingBox"
                            id="d">
                            <feOffset dy="8" in="SourceAlpha" result="shadowOffsetOuter1" />
                            <feGaussianBlur stdDeviation="8" in="shadowOffsetOuter1" result="shadowBlurOuter1" />
                            <feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0" in="shadowBlurOuter1" />
                        </filter>
                        <path
                            d="M160.52 108.243h497.445c17.83 0 24.296 1.856 30.814 5.342 6.519 3.486 11.635 8.602 15.12 15.12 3.487 6.52 5.344 12.985 5.344 30.815v497.445c0 17.83-1.857 24.296-5.343 30.814-3.486 6.519-8.602 11.635-15.12 15.12-6.52 3.487-12.985 5.344-30.815 5.344H160.52c-17.83 0-24.296-1.857-30.814-5.343-6.519-3.486-11.635-8.602-15.12-15.12-3.487-6.52-5.343-12.985-5.343-30.815V159.52c0-17.83 1.856-24.296 5.342-30.814 3.486-6.519 8.602-11.635 15.12-15.12 6.52-3.487 12.985-5.343 30.815-5.343z"
                            id="b" />
                        <path
                            d="M159.107 107.829H656.55c17.83 0 24.296 1.856 30.815 5.342 6.518 3.487 11.634 8.602 15.12 15.12 3.486 6.52 5.343 12.985 5.343 30.816V656.55c0 17.83-1.857 24.296-5.343 30.815-3.486 6.518-8.602 11.634-15.12 15.12-6.519 3.486-12.985 5.343-30.815 5.343H159.107c-17.83 0-24.297-1.857-30.815-5.343-6.519-3.486-11.634-8.602-15.12-15.12-3.487-6.519-5.343-12.985-5.343-30.815V159.107c0-17.83 1.856-24.297 5.342-30.815 3.487-6.519 8.602-11.634 15.12-15.12 6.52-3.487 12.985-5.343 30.816-5.343z"
                            id="e" />
                    </defs>
                    <g fill="none" fill-rule="evenodd" opacity=".9">
                        <g transform="rotate(29 421.929 414.496)">
                            <use fill="#000" filter="url(#d)" xlink:href="#e" />
                            <use fill="url(#f)" xlink:href="#e" />
                        </g>
                        <g transform="rotate(65 416.452 409.167)">
                            <use fill="#000" filter="url(#a)" xlink:href="#b" />
                            <use fill="url(#c)" xlink:href="#b" />
                        </g>
                      
                    </g>
      </svg>
  <div>
    <!-- SECTION HERO -->
    <div class="relative items-center justify-center w-full overflow-x-hidden lg:pt-40 lg:pb-40 xl:pt-40 xl:pb-64">
      <div class="container flex flex-col items-center justify-between h-full max-w-6xl px-8 mx-auto -mt-16 lg:flex-row xl:px-0">
        <div class="z-30 flex flex-col items-center w-full max-w-xl pt-48 text-center lg:items-start lg:w-1/2 lg:pt-20 xl:pt-40 lg:text-left">
          <h1 class="relative mb-4 text-3xl font-black leading-tight text-gray-900 sm:text-6xl xl:mb-8 mt-4">Build the Next Great Thing</h1>
          <p class="pr-0 mb-8 text-base text-gray-600 sm:text-lg xl:text-2xl lg:pr-20">Welcome to Vue Mastery. Create your account and join us.</p>
          
          <a href="#_" class="relative self-start inline-block w-auto px-8 py-4 mx-auto mt-0 text-base font-bold text-white bg-indigo-600 border-t border-gray-200 rounded-md shadow-xl sm:mt-1 fold-bold lg:mx-0">Signup Today!</a>
          <!-- Integration with Vue Components -->
          <svg class="absolute left-0 max-w-md mt-4 -ml-64 left-svg" viewBox="0 0 423 423" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
            <defs>
              <linearGradient x1="100%" y1="0%" x2="4.48%" y2="0%" id="linearGradient-1">
                <stop stop-color="#5C54DB" offset="0%" />
                <stop stop-color="#6A82E7" offset="100%" />
              </linearGradient>
              <filter x="-9.3%" y="-6.7%" width="118.7%" height="118.7%" filterUnits="objectBoundingBox" id="filter-3">
                <feOffset dy="8" in="SourceAlpha" result="shadowOffsetOuter1" />
                <feGaussianBlur stdDeviation="8" in="shadowOffsetOuter1" result="shadowBlurOuter1" />
                <feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.1 0" in="shadowBlurOuter1" />
              </filter>
              <rect id="path-2" x="63" y="504" width="300" height="300" rx="40" />
            </defs>
            <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" opacity=".9">
              <g id="Desktop-HD" transform="translate(-39 -531)">
                <g id="Hero" transform="translate(43 83)">
                  <g id="Rectangle-6" transform="rotate(45 213 654)">
                    <use fill="#000" filter="url(#filter-3)" xlink:href="#path-2" />
                    <use fill="url(#linearGradient-1)" xlink:href="#path-2" />
                  </g>
                </g>
              </g>
            </g>
          </svg>
        </div>
      </div>
    </div>
    <!-- HERO SECTION END -->
  </div>

    <section class="py-24 mb-24 mt-8">
      <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
        <h2 class="font-manrope text-4xl font-bold text-gray-900 text-center mb-14">Our popular blogs</h2>
        <div class="flex justify-center mb-14 gap-y-8 lg:gap-y-0 flex-wrap md:flex-wrap lg:flex-nowrap lg:flex-row lg:justify-between lg:gap-x-8">
          <div v-for="post in latestPosts" :key="post.id" class="group cursor-pointer w-full max-lg:max-w-xl lg:w-1/3 border border-gray-300 rounded-2xl p-5 transition-all duration-300 hover:border-indigo-600">
            <div class="flex items-center mb-6 ">
              <img :src="post.image" alt="Post image" class="rounded-lg h-52 w-full">
            </div>
            <div class="block">
              <span class="text-sm text-gray-600">{{ post.date }}</span>
              <h4 class="text-gray-900 font-medium leading-8 mb-4">{{ post.title }}</h4>
              <p class="text-gray-500 leading-6 mb-8">{{ post.body }}</p>
              <div class="flex items-center justify-between mb-2 font-medium">
                <h6 class="text-sm text-gray-500">By {{ getUserName(post.user) }}</h6>
                <router-link :to="{ name: 'PostDetail', params: { id: post.id } }" class="cursor-pointer text-ms text-indigo-600 font-semibold">Read more..</router-link>
              </div>
            </div>
          </div>
        </div>
        <router-link to="/blog"  class="cursor-pointer border border-gray-300 shadow-sm rounded-full py-3.5 px-7 w-52 flex justify-center items-center text-gray-900 font-semibold mx-auto transition-all duration-300 hover:bg-gray-100">View All</router-link>
      </div>
    </section>
  
</template>

<script>
import axios from 'axios';

export default {
  name: 'HomePage',
  data() {
    return {
      posts: [],
      users: []
    };
  },
  computed: {
    latestPosts() {
      return this.getLatestPosts();
    }
  },
  mounted() {
    this.fetchPosts();
    this.fetchUsers();
  },
  methods: {
    async fetchPosts() {
      try {
        const response = await axios.get('http://localhost:3000/posts');
        this.posts = response.data;
      } catch (error) {
        console.error('Error fetching posts:', error);
      }
    },
    async fetchUsers() {
      try {
        const response = await axios.get('http://localhost:3000/users');
        this.users = response.data;
      } catch (error) {
        console.error('Error fetching users:', error);
      }
    },
    getUserName(userId) {
      const user = this.users.find(user => user.id === userId);
      return user ? user.name : 'Unknown';
    },
    getLatestPosts() {
      // Sort posts by date in descending order and return the top 3
      return this.posts
        .slice() // Create a shallow copy of the posts array to avoid mutating the original array
        .sort((a, b) => new Date(b.date) - new Date(a.date))
        .slice(0, 3);
    }
  }
}
</script>

<style scoped>
/* Votre CSS sp√©cifique au composant */
@media (max-width: 1520px) {
  .left-svg {
    display: none;
  }
}
</style>